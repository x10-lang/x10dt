<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
	<title>Arrays</title>
</head>

<body>
 <h2><a name="tth_sEc3">
3</a>&nbsp;&nbsp;Arrays</h2>


<div class="p"><!----></div>
Arrays are organized data, arranged so that it can be accessed by subscript.
An <b>Array[T]</b> <b>A</b> has a <b>Region</b> <b>A.region</b>, telling which
<b>Point</b>s are in <b>A</b>.  For each point <b>p</b> in <b>A.region</b>,
<b>A(p)</b> is the datum of type <b>T</b> associated with <b>p</b>.  X10
implementations should 
attempt to store <b>Array</b>s efficiently, and to make array element accesses
quick-<em>e.g.</em>, avoiding constructing <b>Point</b>s when unnecessary.

<div class="p"><!----></div>
This generalizes the concepts of arrays appearing in many other programming
languages.  A <b>Point</b> may have any number of coordinates, so an
<b>Array</b> can have, in effect, any number of integer subscripts.  

<div class="p"><!----></div>
Indeed, it is possible to write code that works on <b>Array</b>s regardless 
of dimension.  For example, to add one <b>Array[Int]</b> <b>src</b> into another
<b>dest</b>, 
<pre>
static def addInto(src: Array[Int], dest:Array[Int])
  {src.region == dest.region}
  = {
    for (p in src.region) 
       dest(p) += src(p);
  }
</pre>

Since <b>p</b> is a <b>Point</b>, it can hold as many coordinates as are
necessary for the arrays <b>src</b> and <b>dest</b>.

<div class="p"><!----></div>
The basic operation on arrays is subscripting: if <b>A</b> is an <b>Array[T]</b>
and <b>p</b> a point with the same rank as <b>A.region</b>, then
<b>A(p)</b>
is the value of type <b>T</b> associated with point <b>p</b>.

<div class="p"><!----></div>
Array elements can be changed by assignment. If <b>t:T</b>, 
<pre>
A(p) = t;
</pre>
modifies the value associated with <b>p</b> to be {t}, and leaves all other
values in <b>A</b> unchanged.

<div class="p"><!----></div>
An <b>Array[T]</b> <b>A</b> has: 

<ul>
<li> <b>A.region</b>: the <b>Region</b> upon which <b>A</b> is defined.
<div class="p"><!----></div>
</li>

<li> <b>A.size</b>: the number of elements in <b>A</b>.
<div class="p"><!----></div>
</li>

<li> <b>A.rank</b>, the rank of the points usable to subscript <b>A</b>.
      Identical to <b>A.region.rank</b>.
<div class="p"><!----></div>
</li>
</ul>

<div class="p"><!----></div>
     <h3><a name="tth_sEc3.1">
3.1</a>&nbsp;&nbsp;Array Constructors</h3>


<div class="p"><!----></div>
To construct an array whose elements all have the same value, call
<b>new Array[T](R, init)</b>, where <b>init:T</b> is the initial value. 
For example, an array of a thousand <b>&#246;h!"</b>s can be made by:
<b>new Array[String](1..1000, &#246;h!")</b>.

<div class="p"><!----></div>
To construct and initialize an array, call the two-argument constructor. 
<b>new Array[T](R, f)</b> constructs an array of elements of type <b>T</b> on
region <b>R</b>, with <b>A(p)</b> initialized to <b>f(p)</b> for each point
<b>p</b> in <b>R</b>.  <b>f</b> must be a function taking a point of rank
<b>R.rank</b> to a value of type <b>T</b>.  <em>E.g.</em>, to construct an array of a
hundred zero values, call
<b>new Array[Int](1..100, (Point(1))=&#62;0)</b>. 
To construct a multiplication table, call
<b>new Array[Int]((0..9)*(0..9), (p:Point(2)) =&#62; p(0)*p(1))</b>.

<div class="p"><!----></div>
Other constructors are available; see the API documentation and
&#167;. 

<div class="p"><!----></div>
     <h3><a name="tth_sEc3.2">
3.2</a>&nbsp;&nbsp;Array Operations</h3>


<div class="p"><!----></div>
The basic operation on <b>Array</b>s is subscripting.  If <b>A:Array[T]</b> and 
<b>p:Point{rank == A.rank}</b>, then <b>a(p)</b> is the value of type <b>T</b>
appearing at position <b>p</b> in <b>A</b>.    The syntax is identical to
function application, and, indeed, arrays may be used as functions.
<b>A(p)</b> may be assigned to, as well, by the usual assignment syntax
<b>A(p)=t</b>.
(This uses the application and setting syntactic sugar, as given in &#167;.)

<div class="p"><!----></div>
Sometimes it is more convenient to subscript by integers.  Arrays of rank 1-4
can, in fact, be accessed by integers: 
<pre>
val A1 = new Array[Int](1..10, 0);
A1(4) = A1(4) + 1;
val A4 = new Array[Int]((1..2)*(1..3)*(1..4)*(1..5), 0);
A4(2,3,4,5) = A4(1,1,1,1)+1;
</pre>

<div class="p"><!----></div>
Iteration over an <b>Array</b> is defined, and produces the <b>Point</b>s of the
array's region.  If you want to use the values in the array, you have to
subscript it.  For example, you could double every element of an
<b>Array[Int]</b> by: 
<pre>
for (p in A) A(p) = 2*A(p);
</pre>

<div class="p"><!----></div>

</body>
</html>