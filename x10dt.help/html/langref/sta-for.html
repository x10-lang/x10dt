<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
<title>For statement</title>
</head>

<body>
 <h2><a name="tth_sEc12">
12</a>&nbsp;&nbsp;For statement</h2>


<div class="p"><!----></div>

<em>
  
<table>

<tr><td align="right">ForStatement ::= BasicForStatement </td></tr>
<tr><td align="right">&#124; EnhancedForStatement </td></tr>
<tr><td align="right">BasicForStatement ::= <b>for</b> <b>(</b> ForInit<sup>?</sup>&nbsp;<b>;</b> Exp<sup>?</sup>&nbsp;<b>;</b> ForUpdate<sup>?</sup>&nbsp;<b>)</b> Statement </td></tr>
<tr><td align="right">ForInit ::= StatementExpList </td></tr>
<tr><td align="right">&#124; LocalVariableDecl </td></tr>
<tr><td align="right">ForUpdate ::= StatementExpList </td></tr>
<tr><td align="right">StatementExpList ::= StatementExp </td></tr>
<tr><td align="right">&#124; StatementExpList <b>,</b> StatementExp </td></tr>
<tr><td align="right">EnhancedForStatement ::= <b>for</b> <b>(</b> LoopIndex <b>in</b> Exp <b>)</b> Statement </td></tr>
<tr><td align="right">&#124; <b>for</b> <b>(</b> Exp <b>)</b> Statement </td></tr>
<tr><td align="right"></td></tr></table>
</em>

<div class="p"><!----></div>
<b>for</b> statements provide bounded iteration, such as looping over a list.
It has two forms: a basic form allowing near-arbitrary iteration, <em>a la</em>
C, and an enhanced form designed to iterate over a collection.

<div class="p"><!----></div>
A basic <b>for</b> statement provides for arbitrary iteration in a somewhat
more organized fashion than a <b>while</b>.  The loop 
<b>for(init; test; step)body</b> is
equivalent to: 
<pre>
{
   init;
   while(test) {
      body;
      step;
   }
}
</pre>

<div class="p"><!----></div>
<b>init</b> is performed before the loop, and is traditionally used to declare
and/or initialize the loop variables. It may be a single variable binding
statement, such as <b>var i:Int = 0</b> or <b>var i:Int=0, j:Int=100</b>. (Note
that a single variable binding statement may bind multiple variables.)
Variables introduced by <b>init</b> may appear anywhere in the <b>for</b>
statement, but not outside of it.  Or, it may be a sequence of expression
statements, such as <b>i=0, j=100</b>, operating on already-defined variables.
If omitted, <b>init</b> does nothing.

<div class="p"><!----></div>
<b>test</b> is a Boolean-valued expression; an iteration of the loop will only
proceed if <b>test</b> is true at the beginning of the loop, after <b>init</b>
on the first iteration or after <b>step</b> on later ones. If omitted, <b>test</b>
defaults to <b>true</b>, giving a loop that will run until stopped by some
other means such as <b>break</b>, <b>return</b>, or <b>throw</b>.

<div class="p"><!----></div>
<b>step</b> is performed after the loop body, between one iteration and the
next. It traditionally updates the loop variables from one iteration to the
next: <em>e.g.</em>, <b>i++</b> and <b>i++,j-</b>.  If omitted, <b>step</b> does nothing.

<div class="p"><!----></div>
<b>body</b> is a statement, often a code block, which is performed whenever
<b>test</b> is true.  If omitted, <b>body</b> does nothing.

<div class="p"><!----></div>
<a name="ForAllLoop">
</a>An enhanced for statement is used to iterate over a collection, or other
structure designed to support iteration by implementing the interface
<b>Iterable[T]</b>.    The loop variable must be of type <b>T</b>, 
or destructurable from a value of type <b>T</b>
(&#167;).  
Each iteration of the loop
binds the iteration variable to another element of the collection.
The loop <b>for(x in c)S</b> behaves like: 
<pre>
val iterator: Iterator[T] = c.iterator();
while (iterator.hasNext()) {
  val x : T = iterator.next();
  S();
}
</pre>

<div class="p"><!----></div>
A number of library classes implement <b>Iterable</b>, and thus can be iterated
over.  For example, iterating over a <b>Region</b> iterates the <b>Point</b>s in
the region, and iterating over an <b>Array</b> iterates over the
<b>Point</b>s at which the  array is defined.

<div class="p"><!----></div>
The type of the loop variable may be supplied as <b>x &lt;: T</b>.  In this case
the iterable <b>c</b> must have type <b>Iterable[U</b> for some <b>U &lt;: T</b>,
and <b>x</b> will be given the type <b>U</b>.

<div class="p"><!----></div>
This loop adds up the elements of a <b>List[Int]</b>.
Note that iterating over a list yields the elements of the list, as specified
in the <b>List</b> API. 
<pre>
static def sum(a:x10.util.List[Int]):Int {
  var s : Int = 0;
  for(x in a) s += x;
  return s;
}
</pre>

<div class="p"><!----></div>
The following code sums the elements of an integer array.  Note that the
<b>for</b> loop iterates over the indices of the array, not the elements, as
specified in the <b>Array</b> API.  
<pre>
static def sum(a: Array[Int]): Int {
  var s : Int = 0;
  for(p in a) s += a(p);
  return s;
}
</pre>

<div class="p"><!----></div>
Iteration variables have the <b>for</b> statement as scope.  They shadow other
variables of the same names.

<div class="p"><!----></div>
In practice, the ability to do destructuring in a <b>for</b> statement is
mainly used for iterate over ranges of numbers.  
<b>for ([i] in 1..10)</b> iterates over numbers from 1 to 10.
The brackets are important. 
<b>for (i in 1..10</b> iterates over <b>Point</b>s from 
<b>[1] as Point</b> to <b>[10] as Point</b>.

<div class="p"><!----></div>
<pre>
  var sum : Int = 0;
  for ([i] in 1..n) sum += i;
</pre>


<div class="p"><!----></div>

</body>
</html>