<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
<title>Generic programming with structs</title>
</head>

<body>
  <h2><a name="tth_sEc5">
5</a>&nbsp;&nbsp;Generic programming with structs</h2>



<div class="p"><!----></div>
The programmer must be aware of the different interpretations of
equality for structs and classes and ensure that the code is correctly
written for both cases. 

<div class="p"><!----></div>
It is occasionally necessary to tell what kind of value <b>x</b> is: object,
struct, or function.  Three static methods on <b>x10.lang.System</b> provide
this test: 
<b>System.isObject(x)</b> returns true if <b>x</b> is a value of <b>Object</b>
type, including <b>null</b>; <b>System.isStruct(x)</b> returns true if <b>x</b>
is a <b>struct</b>; <b>System.isFunction(x)</b> returns true if <b>x</b> is a
closure value.  Precisely one of these three functions returns true for any
X10 value <b>x</b>.  

<div class="p"><!----></div>
<pre>
val x:X = ...;
if (System.isObject(x)) { // x is a real object
   val x2 = x as Object; // this cast will always succeed.
   ...
} else if (System.isStruct(x)) { // x is a struct
   ...
} else {  
  assert System.isFunction(x);
}
</pre>

<div class="p"><!----></div>

</body>
</html>