<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
	<title>Local variables</title>
</head>

<body>
 <h2><a name="tth_sEc5">
5</a>&nbsp;&nbsp;Local variables</h2><a name="local-variables">
</a>
Local variables are declared in a limited scope, and, dynamically, keep their
values only for so long as the scope is being executed.  They may be <b>var</b>
or <b>val</b>.  
They may have 
initializer expressions: <b>var i:Int = 1;</b> introduces 
a variable <b>i</b> and initializes it to 1.
If the variable is immutable
(<b>val</b>)
the type may be omitted and
inferred from the initializer type ().
Variables marked <b>shared</b> can be used by many activities at once; see
.

<div class="p"><!----></div>
The variable declaration <b>val x:T=e;</b> confirms that <b>e</b>'s value is of
type <b>T</b>, and then introduces the variable <b>x</b> with type <b>T</b>.  For
example, 
<pre>
   val t : Tub = new Tub();
</pre>

produces a variable <b>t</b> of type <b>Tub</b>, even though the expression
<b>new Tub()</b> produces a value of type <b>Tub!</b> - that is, a <b>Tub</b>
located <b>here</b>.    This can be inconvenient if, , it is desired to make
method calls upon <b>t</b>.  

<div class="p"><!----></div>
Including type information in variable declarations is generally good
programming practice: it explains to both the compiler and human readers
something of the intent of the variable.  However, including types in 
<b>val t:T=e</b> can obliterate helpful information.  So, X10 allows a <em>
documentation type declaration</em>, written <b>val t &lt;: T = e</b>.  This 
has the same effect as <b>val t = e</b>, giving <b>t</b> the full type inferred
from <b>e</b>; but it also confirms statically that that type is at least
<b>T</b>.  For example, the following gives <b>t</b> the type <b>Tub!</b> as
desired: 
<pre>
   val t &lt;: Tub = new Tub();
</pre>

However, replacing <b>Tub</b> by <b>Int</b> would result in a compilation error. 

<div class="p"><!----></div>
Variables do not need to be initialized at the time of definition - not even
<b>val</b>s. They must be initialized by the time of use, and <b>val</b>s may
only be assigned to once. The X10 compiler performs static checks guaranteeing
this restriction. The following is correct, albeit obtuse: 
<pre>
static def main(r: Rail[String]):Void {
  val a : Int;
  a = r.length;
  val b : String;
  if (a == 5) b = "five?"; else b = "" + a + " args"; 
  // ... 
</pre>

<div class="p"><!----></div>

</body>
</html>