<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
	<title>Activities</title>
</head>

<body>
 <h1><a name="tth_chAp1">
Chapter 14 </a><br />Activities</h1><a name="XtenActivities">
</a>


<div class="p"><!----></div>
An <em>activity</em> is a statement being executed, independently, with its own
local variables; it may be thought of as a very light-weight thread. An
X10 computation may have many concurrent activities executing at any
give time.  All X10 code runs as part of an activity; when an X10 program is
started, the <b>main</b> method is invoked in an activity, called the <em>root
activity</em>.

<div class="p"><!----></div>
Activities coordinate their execution by various control and data structures.
For example, 
<b>when(x==0);</b> blocks the current activity until some other activity
sets <b>x</b> to zero.  However, activities determine the places at which they
may be blocked and resumed, by <b>when</b> and similar constructs.  There are
no means by which one activity can arbitrarily interrupt, block, or resume
another, no method  <b>activity.interrupt()</b>.

<div class="p"><!----></div>
An activity may be <em>running</em>, <em>blocked</em> on some condition or <em>
terminated</em>. If it is terminated, it is terminated in the same way that its
statement is: in particular, if the statement terminates abruptly, the
activity terminates abruptly for the same reason.
(&#167;).

<div class="p"><!----></div>
Activities can be long-running entities with a good deal of local state.  In
particular they can involve recursive method calls (and therefore have runtime
stacks).  However, activities can also be short-running light-weight entities,
<em>e.g.</em>, it is reasonable to have an activity that simply increments a variable.

<div class="p"><!----></div>
An activity may asynchronously and in parallel launch activities at
other places.  Every activity except the initial <b>main</b> activity is spawned
by another.  Thus, at any instant, the activities in a program form a tree.

<div class="p"><!----></div>
X10 uses this tree in crucial ways.  
First is the distinction 
between <em>local</em> termination and <em>global</em>
termination of a statement. The execution of a statement by an
activity is said to terminate locally when the activity has finished
all its computation. (For instance the
creation of an asynchronous activity terminates locally when the
activity has been created.)  It is said to terminate globally when it
has terminated locally and all activities that it may have spawned at
any place have, recursively, terminated globally.
For example, consider: 
<pre>
async {s1();}
async {s2();}
</pre>
The primary activity spawns two child activities and then terminates locally,
very quickly.  The child activities may take arbitrary amounts of time to
terminate (and may spawn grandchildren).  When <b>s1()</b>, <b>s2()</b>, and
all their descendants terminate locally, then the primary activity terminates
globally. 

<div class="p"><!----></div>
The program as a whole terminates when the root activity terminates globally.
In particular, X10 does not permit the creation of 
daemon threads-threads that outlive the lifetime of the root
activity.  We say that an X10 computation is <em>rooted</em>
(&#167;).

<div class="p"><!----></div>
<em>
<b>Future Extensions.&nbsp;&nbsp;</b> We may permit the initial activity to be a daemon activity
to permit reactive computations, such as webservers, that may not
terminate.</em>

<div class="p"><!----></div>

</body>
</html>