<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
           "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<meta name="GENERATOR" content="TtH 3.89">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
 
      
<title>Interfaces: More Abstract Than Abstract</title>

 <h2><a name="tth_sEc3">
3</a>&nbsp;&nbsp;Interfaces: More Abstract Than Abstract</h2><a name="sec:mata">
</a>

<div class="p"><!----></div>
While <tt>NoahsArk</tt> may not be as complete as a real ark should be, it can implement a
lot of important functionality that all its progeny can use directly: a passenger list is a 
passenger list, no matter what else is different!  There are situations though, where all
that one wants to specify is functionality that has no common implementation, but
that a variety of classes will implement, each in its own way.  This sort of specification
is called an <em>interface</em>.  

<blockquote>
Those of you who are coming from a background in C++ will want to work carefully through
our discussion of interfaces, because they constitute the closest approximation
to multiple inheritance that X10provides.
</blockquote>

<div class="p"><!----></div>
A nice example of an interface is <tt>Arithmetic</tt>:

<pre>&nbsp;1&nbsp;public&nbsp;interface&nbsp;Arithmetic[T]&nbsp;{
&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;def&nbsp;add(t:&nbsp;T}:&nbsp;T;
&nbsp;3&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;def&nbsp;subtract(t:&nbsp;T):&nbsp;T;
&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;def&nbsp;multiply(t:&nbsp;T):&nbsp;T;
&nbsp;5&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;def&nbsp;divide(t:&nbsp;T):&nbsp;T;
&nbsp;6&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;def&nbsp;uminus():&nbsp;T;
&nbsp;7&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;VERSION&nbsp;=&nbsp;``1.1'';
&nbsp;8&nbsp;}
</pre>
Line by line:

<dl compact="compact">

	<dd><b>line 1:</b>  Like classes, a top-most interface is either public or accessible only in the
package of which it is a part.  An interface declared within the body of a class is <em>always</em>
static (it is never per-instance and cannot refer to instance members or methods in the 
surrounding context), but it  can have any access limit: public, protected, default, or private. 

<div class="p"><!----></div>
The "<tt>[T]</tt>" following <tt>Arithmetic</tt> says that the interface is parameterized by a type
<tt>T</tt>.  We've seen this before, in the argument <tt>args</tt> for <tt>main()</tt>, whose type is
<tt>Array[String]</tt>.  The lingo of the trades is the <tt>Arithmetic</tt> is a <em>generic interface</em>,
and <em>Array</em> is a <em>generic class</em>.</dd>

	<dd><b>lines 2-7:</b> An interface may only declare abstract methods, so (unlike the story
with abstract classes), you don't need the keyword <tt>abstract</tt>.  What line 2 says is that
if a class <tt>U</tt> implements the interface <tt>Arithmetic[T]</tt>, if <tt>u</tt> is a <tt>U</tt>, and if
<tt>t</tt> is a <tt>T</tt>, then the expression <tt>u.add(t)</tt> produces a result that is a <tt>T</tt>.
In real life, we might have <tt>U</tt> some sort of integer, and <tt>T</tt> some sort of floating
point number, and the value of sum <tt>u.add)t</tt> would be again a floating point.</dd>
 <dt><b></b></dt>
	<dd><b>line 8:</b> Interfaces may also declare static constants.  One could imagine
an interface that did nothing else:

<pre>public&nbsp;interface&nbsp;IntelCpuModel1234&nbsp;{
&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;REGISTER_WIDTH&nbsp;=&nbsp;64;
&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;SPEED_IN_GHZ&nbsp;=&nbsp;2.5;
&nbsp;&nbsp;&nbsp;...
}
</pre>
A class with the same information would probably be more convenient, but who knows?</dd>
</dl>
There is nothing sacred about a generic class or interface being parameterized by one type:  one can
use as many as needed: "<tt>class X[T1, T2, T3,...] {...}</tt>".  

<div class="p"><!----></div>
Here is how interfaces get used: consider the declaration

<pre>class&nbsp;Int32&nbsp;implements&nbsp;Arithmetic&nbsp;{&nbsp;...&nbsp;}
</pre>
It says that in the body of <tt>Int32</tt>, we are guaranteed to find implementations of
all of the methods specified in the interface <tt>Arithmetic</tt>, with exactly the 
argument types and return types shown there.

<div class="p"><!----></div>
We said that interfaces provide a sort of "multiple inheritance."  What we meant is that
a class may declare that implements any number of interfaces.  That is certainly reasonable:
all you are saying is that the class provides several named sets of methods.  It is, of course,
a weaker notion than multiple inheritance, since no instance members or methods are actually
inherited when a class implements an interface: all of the code is in the class or in one of its ancestors up the inheritance chain.

<div class="p"><!----></div>
Finally, just as one class can extend another, one interface can extend another-in fact, it may
extend several:

<pre>&nbsp;interface&nbsp;IA&nbsp;extends&nbsp;IB,&nbsp;IC&nbsp;{&nbsp;...&nbsp;}
</pre>
One could
say "<tt>IA</tt> is a sub-interface of <tt>IB</tt> and <tt>IC</tt>', but it just doesn't sound right:
"<tt>IA</tt> <em>refines</em> <tt>IB</tt> and <tt>IC</tt>" is somehow a lot better.  

<div class="p"><!----></div>
There is a sort of convention that interface names should begin with "<tt>I</tt>",  Suppose
for example, that we had used
<tt>INumber</tt>, instead of <tt>Arithmetic</tt>, for our interface name.  We could then have
declared  a class
named <tt>Number</tt> that implements it.  A matter of taste of course, but not an unreasonable
convention.  A variation on this theme is to append "<tt>Impl</tt>" to the name of an interface
to create the name of a concrete class that implements it:  interface <tt>XmlParser</tt>
is implemented by <tt>XmlParserImpl</tt>.  You will see both conventions widely used.

<div class="p"><!----></div>

</html>