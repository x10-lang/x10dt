<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
	<title>Operations on Arrays</title>
</head>

<body>
 <h2><a name="tth_sEc4">
4</a>&nbsp;&nbsp;Operations on arrays</h2>
In the following let <tt>a</tt> be an array with distribution <tt>D</tt> and
base type <tt>T</tt>. <tt>a</tt> may be mutable or immutable, unless
indicated otherwise.

<div class="p"><!----></div>
     <h3><a name="tth_sEc4.1">
4.1</a>&nbsp;&nbsp;Element operations</h3>
The value of <tt>a</tt> at a point <tt>p</tt> in its region of definition is
obtained by using the indexing operation <tt>a[p]</tt>. This operation
may be used on the left hand side of an assignment operation to update
the value. The operator assignments <tt>a[i] op= e</tt> are also available
in  X10.

<div class="p"><!----></div>
     <h3><a name="tth_sEc4.2">
4.2</a>&nbsp;&nbsp;Constant promotion</h3><a name="ConstantArray">
</a>

<div class="p"><!----></div>
For a distribution <tt>D</tt> and a constant or final variable <tt>v</tt> of
type <tt>T</tt> the expression <tt>new T[D](point p) { return v;}</tt>
<tt>D v</tt> denotes the mutable array with
distribution <tt>D</tt> and base type <tt>T</tt> initialized with <tt>v</tt>.

<div class="p"><!----></div>
     <h3><a name="tth_sEc4.3">
4.3</a>&nbsp;&nbsp;Restriction of an array</h3>

<div class="p"><!----></div>
Let <tt>D1</tt> be a sub-distribution of <tt>D</tt>. Then <tt>a  -  D1</tt>
represents the sub-array of <tt>a</tt> with the distribution <tt>D1</tt>.

<div class="p"><!----></div>
Recall that a rich set of operators are available on distributions
(&#167;&nbsp;11.2</a>) to obtain sub-distributions
(e.g. restricting to a sub-region, to a specific place etc).

<div class="p"><!----></div>
     <h3><a name="tth_sEc4.4">
4.4</a>&nbsp;&nbsp;Assembling an array</h3>
Let <tt>a1,a2</tt> be arrays of the same base type <tt>T</tt> defined over
distributions <tt>D1</tt> and <tt>D2</tt> respectively. Assume that both
arrays are value or reference arrays. 

<div class="p"><!----></div>
<b>Assembling arrays over disjoint regions&nbsp;&nbsp;</b>

<div class="p"><!----></div>
If <tt>D1</tt> and <tt>D2</tt> are disjoint then the expression <tt>a1 ||
a2</tt> denotes the unique array of base type <tt>T</tt> defined over the
distribution <tt>D1 || D2</tt> such that its value at point <tt>p</tt> is
<tt>a1[p]</tt> if <tt>p</tt> lies in <tt>D1</tt> and <tt>a2[p]</tt>
otherwise. This array is a reference (value) array if <tt>a1</tt> is.

<div class="p"><!----></div>

<b>Overlaying an array on another&nbsp;&nbsp;</b>
The expression
<tt>a1.overlay(a2)</tt> (read: the array <tt>a1</tt> <em>overlaid with</em> <tt>a2</tt>)
represents an array whose underlying region is the union of that of
<tt>a1</tt> and <tt>a2</tt> and whose distribution maps each point <tt>p</tt>
in this region to <tt>D2[p]</tt> if that is defined and to <tt>D1[p]</tt>
otherwise. The value <tt>a1.overlay(a2)[p]</tt> is <tt>a2[p]</tt> if it is defined and <tt>a1[p]</tt> otherwise.

<div class="p"><!----></div>
This array is a reference (value) array if <tt>a1</tt> is.

<div class="p"><!----></div>
The expression <tt>a1.update(a2)</tt> updates the array <tt>a1</tt> in place
with the result of <tt>a1.overlay(a2)</tt>.


<div class="p"><!----></div>
     <h3><a name="tth_sEc4.5">
4.5</a>&nbsp;&nbsp;Global operations </h3>

<div class="p"><!----></div>
<b>Pointwise operations&nbsp;&nbsp;</b><a name="ArrayPointwise">
</a>
Suppose that <tt>m</tt> is an operation defined on type <tt>T</tt> that
takes an argument of type <tt>S</tt> and returns a value of type <tt>
R</tt>. Such an operation can be lifted pointwise to operate on a <tt>T</tt>
array and an <tt>S</tt> array defined over the same distribution <tt>D</tt>
to return an <tt>R</tt> array defined over <tt>D</tt>, using the
<tt>lift</tt> operation, <tt>a.lift(f, b)</tt>.

<div class="p"><!----></div>

<b>Reductions&nbsp;&nbsp;</b><a name="ArrayReductions">
</a>

<div class="p"><!----></div>
Let <tt>f</tt> be a <tt>binaryOp</tt> defined on type <tt>T</tt> (e.g. see
the specification of the classes <tt>x10.lang.intArray</tt>).  Let <tt>
a</tt> be a value or reference array over base type <tt>T</tt>. Then the
operation <tt>a.reduce(f)</tt> returns a value of type <tt>T</tt> obtained
by performing <tt>m</tt> on all points in <tt>a</tt> in some order, and in
parallel.

<div class="p"><!----></div>
This operation involves communication between the places over which
the array is distributed. The  X10 implementation guarantees that
only one value of type <tt>T</tt> is communicated from a place as part of
this reduction process.

<div class="p"><!----></div>

<b>Scans&nbsp;&nbsp;</b><a name="ArrayScans">
</a>

<div class="p"><!----></div>
Let <tt>m</tt> be a reduction operator defined on type <tt>T</tt>. Let <tt>
a</tt> be a value or reference array over base type <tt>T</tt> and
distribution <tt>D</tt>. Then the operation <tt>a||m()</tt> returns an array
of base type <tt>T</tt> and distribution <tt>D</tt> whose <tt>i</tt>th element
(in canonical order) is obtained by performing the reduction <tt>m</tt>
on the first <tt>i</tt> elements of <tt>a</tt> (in canonical order).

<div class="p"><!----></div>
This operation involves communication between the places over which
the array is distributed. The  X10 implementation will endeavour to
minimize the communication between places to implement this operation.

<div class="p"><!----></div>
Other operations on arrays may be found in <tt>x10.lang.intArray</tt> and
other related classes.

<br /><br /><hr /><small>File translated from
T<sub><font size="-1">E</font></sub>X
by <a href="http://hutchinson.belmont.ma.us/tth/">
T<sub><font size="-1">T</font></sub>H</a>,
version 3.80.<br />On 07 Jun 2008, 13:48.</small>
</body>
</html>