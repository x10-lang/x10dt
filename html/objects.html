<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
	<title>Objects</title>
</head>

<body>
 <h2><a name="tth_sEc6">
6</a>&nbsp;&nbsp;Objects</h2><a name="XtenObjects">
</a>

<div class="p"><!----></div>
An object is an instance of a scalar class or an array type.  It is
created by using a class instance creation expression
(&#167;&nbsp;12.4) or an array creation
(&#167;&nbsp;11.3) expression, such as an array
initializer. An object that is an instance of a reference (value) type
is called a <em>reference</em> (<em>value</em>) <em>object</em>.

<div class="p"><!----></div>
All value and reference classes subclass from <tt>x10.lang.Object</tt>.
This class has one <tt>const</tt> field <tt>location</tt> of type <tt>
x10.lang.place</tt>.  Thus all objects in  X10
are located (have a place). However,  X10 permits value objects to
be freely copied from place to place because they contain no mutable
state.  It is permissible for a read of the <tt>location</tt> field of
such a value to always return <tt>here</tt> (&#167;&nbsp;6.0.2);
therefore no space needs to be allocated in the object representation
for such a field.

<div class="p"><!----></div>
In  X10 v1.01 a reference object stays resident at the place at
which it was created for its entire lifetime.

<div class="p"><!----></div>
 X10 has no operation to dispose of a reference.  Instead the
collection of all objects across all places is globally garbage
collected.

<div class="p"><!----></div>
 X10 objects do not have any synchronization information (e.g.
a lock) associated with them. Thus the methods on <tt>
java.lang.Object</tt> for waiting/synchronizing/notification etc are not
available in  X10. Instead the programmer should use atomic blocks
(&#167;&nbsp;7.6) for mutual exclusion and clocks
(&#167;&nbsp;8) for sequencing multiple parallel operations.

<div class="p"><!----></div>
A reference object may have many references, stored in fields of
objects or components of arrays. A change to an object made through
one reference is visible through another reference.  X10 mandates
that all accesses to mutable objects shared between multiple
activities must occur in an atomic section (&#167;7.6).

<div class="p"><!----></div>
 Note that the creation of a remote async activity
(&#167;&nbsp;7.2) <tt>A</tt> at <tt>P</tt> may cause the automatic creation of
references to remote objects at <tt>P</tt>. (A reference to a remote
object is called a <em>remote object reference</em>, to a local object a
<em>local object reference</em>.)  For instance <tt>A</tt> may be created
with a reference to an object at <tt>P</tt> held in a variable referenced
by the statement in <tt>A</tt>.  Similarly the return of a value by a
<tt>future</tt> may cause the automatic creation of a remote object
reference, incurring some communication cost.  An  X10
implementation should try to ensure that the creation of a second or
subsequent reference to the same remote object at a given place does
not incur any (additional) communication cost.

<div class="p"><!----></div>
 A reference to an object may carry with it the values of final fields
of the object. The implementation should try to ensure that the cost
of communicating the values of final fields of an object from the
place where it is hosted to any other place is not incurred more than
once for each target place.

<div class="p"><!----></div>
 X10 does not have an operation (such as Pascal's "dereference"
operation) which returns an object given a reference to the
object. Rather, most operations on object references are transparently
performed on the bound object, as indicated below. The operations on
objects and object references include:

<ul>
<li> Field access (&#167;&nbsp;12.4). An activity holding a
reference to a reference object may perform this operation only if the
object is local.  An activity holding a reference to a value object
may perform this operation regardless of the location of the object
(since value objects can be copied freely from place to place).  The
implementation should try to ensure that the cost of copying the field
from the place where the object was created to the referencing place
will be incurred at most once per referencing place, according to the
rule for final fields discussed above.
<div class="p"><!----></div>
</li>

<li> Method invocation (&#167;&nbsp;12.4).  An activity
holding a reference to a reference object may perform this operation
only if the object is local.  An activity holding a reference to a
value object may perform this operation regardless of the location of
the object (since value objects can be copied freely). The  X10
implementation must attempt to ensure that the cost of copying enough
relevant state of the value object to enable this method invocation to
succeed is incurred at most once for each value object per place.

<div class="p"><!----></div>

<div class="p"><!----></div>
</li>

<li> Casting (&#167;&nbsp;12.4.1).  An activity can perform this
operation on local or remote objects, and should not incur
communication costs (to bring over type information) more than once
per place.

<div class="p"><!----></div>

<div class="p"><!----></div>
</li>

<li> <tt>instanceof</tt> operator (&#167;&nbsp;12.4.2).  An activity
can perform this operation on local or remote objects, and should not
incur communication costs (to bring over type information) more than
once per place.
<div class="p"><!----></div>
</li>

<li> The stable equality operator  and <tt>!=</tt>
(&#167;&nbsp;12.4.3). An activity can perform these operations on
local or remote objects, and should not incur communication costs
(to bring over relevant information) more than once per place.

<div class="p"><!----></div>

<div class="p"><!----></div>
</li>
</ul>
</body>
</html>