<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
<title>Type parameters</title>
</head>

<body>
 <h2><a name="tth_sEc2">
2</a>&nbsp;&nbsp;Type parameters</h2>
<a name="TypeParameters">
</a>

<div class="p"><!----></div>
        A class, interface, method, or closure may have type parameters
        whose scope is the signature and body of the declaring
        class, interface, method,
        or closure.

<div class="p"><!----></div>
        Similarly, a type definition may have
        type parameters that scope over the body of the type
        definition.

<div class="p"><!----></div>
        Type parameters may be constrained by a <em>guard</em> on the declaration
        (&#167;, &#167;,
        &#167;,&#167;).
        The type parameters of classes and interfaces must be
        bound to concrete types (possibly to a type parameter)
        for the type to be legal; thus <b>List[int]</b> and
        <b>List[C]</b> are legal types, but <b>List</b> alone is
        not.
        The type parameters of
        methods and closures
        must be bound to
        concrete types at invocation.
        Parametrized type definitions specify new type
        constructors; the type parameters of a type definition must be bound
        to yield a type.

<div class="p"><!----></div>
     <h3><a name="tth_sEc2.1">
2.1</a>&nbsp;&nbsp;Generic types</h3>
<a name="Generics">
</a>

        A <em>generic class</em> is a class
        declared with one or more type parameters.  Generic
        classes can be instantiated by instantiating the type
        parameters of the base type.

<div class="p"><!----></div>
Consider the following declaration of a <b>Cell</b> class.
<pre>
class Cell[X] {
    var x: X;
    def this(x: X) { this.x = x; }
    def get(): X = x;
    def set(x: X) = { this.x = x; }
}
</pre>

<div class="p"><!----></div>
This declares a class <b>Cell</b> with a type parameter <b>X</b>.
<b>Cell</b> may be used as a type by instantiating <b>X</b>.

<div class="p"><!----></div>
<b>Cell[Int]</b> is the type of all <b>Cell</b> containing an
<b>Int</b>.  The <b>get</b> method returns an <b>Int</b>; the
<b>set</b> method takes an <b>Int</b> as argument.  Note that
<b>Cell</b> alone is not a legal type because the parameter is
not bound.

<div class="p"><!----></div>
Parameters may be declares as <em>invariant</em>, <em>covariant</em>, or
<em>contravariant</em>.  The <b>X</b> parameter of <b>Cell</b> above is
invariant.  
Consider the following classes:
<pre>
class Get[+X] {
    var x: X;
    def this(x: X) { this.x = x; }
    def get(): X = x;
}

<div class="p"><!----></div>
class Set[-X] {
    var x: X;
    def this(x: X) { this.x = x; }
    def set(x: X) = { this.x = x: }
}
</pre>
The <b>X</b> parameter of the <b>Get</b> class is covariant;
the <b>X</b> parameter of the <b>Set</b> class is contravariant.

<div class="p"><!----></div>
A covariant type parameter is permitted to appear only in covariant type positions,
and a contravariant type parameter in contravariant positions. 

<ul>
<li> The return type of a method is a covariant position.
<div class="p"><!----></div>
</li>

<li> The argument types of a method are contravariant positions.
<div class="p"><!----></div>
</li>

<li> Whether a type argument position of a generic class, interface or struct type <b>C</b>
is covariant or contravariant is determined by the <b>+</b> or <b>-</b> annotation
at that position in the declaration of <b>C</b>.
<div class="p"><!----></div>
</li>
</ul>

<div class="p"><!----></div>
Given types <b>S</b> and <b>T</b>.

<ul>
<li>If the parameter of <b>Get</b> is covariant, then
<b>Get[S]</b> is a subtype of <b>Get[T]</b> if
<b>S</b> is a <em>subtype</em> of <b>T</b>.
<div class="p"><!----></div>
</li>

<li>
If the parameter of <b>Set</b> is contravariant, then
<b>Set[S]</b> is a subtype of <b>Set[T]</b> if
<b>S</b> is a <em>supertype</em> of <b>T</b>.
<div class="p"><!----></div>
</li>

<li>
If the parameter of <b>Cell</b> is invariant, then
<b>Cell[S]</b> is a subtype of <b>Cell[T]</b> if
<b>S</b> is a <em>equal</em> to <b>T</b>.
<div class="p"><!----></div>
</li>
</ul>

<div class="p"><!----></div>

</body>
</html>