<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
	<title>Types</title>
</head>

<body>
 <h1><a name="tth_chAp1">
Chapter 1 </a><br />Types</h1>
<a name="XtenTypes">
</a>

<div class="p"><!----></div>
X10 is a <em>strongly typed</em> object-oriented language: every
variable and expression has a type that is known at compile-time.
Types limit the values that variables can hold and specify the places
at which these values lie.

<div class="p"><!----></div>
X10 supports three kinds of runtime entities, <em>objects</em>,
<em>structs</em>, and <em>functions</em>. Objects are instances of <em>
  classes</em> (&#167;). They may contain mutable fields
and must stay resident in the place in which they were
created. Objects are said to be <em>boxed</em> in that variables of a
class type are implemented through a single memory location that
contains a reference to the memory containing the declared state of
the object (and other meta-information such as the list of methods of
the object). Thus objects are represented through an extra level of
indirection. A consequence of this flexibility is that every class
type contains the value "null" corresponding to the invalid
reference. "null" is often useful as a default value. Further, two
objects may be compared for equality ("==") in constant time by
simply containing references to the memory used to represent the
objects.

<div class="p"><!----></div>
Structs are instances of <em>struct classes</em>
(&#167;). They are immutable and may be freely copied
from place to place.  Further, they may be allocated inline, i.e.{}
using only as much memory as necessary to hold the fields of the
struct (and any additional memory necessary to satisfy alignment
constraints for data layout. 

<div class="p"><!----></div>
Functions are instances of <em>function types - </em> &#167;)
  and are created using function literals
  "(x1:T1,...,xn:Tn){c}:T =&#62; e". Functions contain no
  user-visible mutable or immutable state; their representation,
  however, contains enough memory to hold the values of the variables
  in the environment that are referenced in the body of the function
  ("e"). Functions may be freely copied from place to place and
  may be repeatedly applied to a set of arguments, provided that the
  precondition "c" is satisfied.

<div class="p"><!----></div>
These runtime entities are classified into different groups using <em>
  types</em>.  Types are used in variable declarations, explicit coercions
and conversions, object creation, array creation, class literals,
static state and method accessors, and "instanceof"
expressions.<a href="#tthFtNtAAB" name="tthFrefAAB"><sup>1</sup></a>

<div class="p"><!----></div>
X10 has a unified type system. The top of the type hierarchy
is the interface "x10.lang.Any". This specifies the following signature:
<pre>
package x10.lang;
public interface Any {
  property def home():Place;
  property def at(p:Object):Boolean;
  property def at(p:Place):Boolean;
  global safe def toString():String;
  global safe def equals(Any):Boolean;
  global safe def hashCode():Int;
}
</pre>

<div class="p"><!----></div>
Properties are described in (&#167;): in brief they are
immutable instance fields of objects and structs that can be used to
construct types through constraints. Property methods (&#167;) permit
more complex expressions to be defined using properties and other property methods.
A method is "safe" if it has certain behavioral characteristics &#167;.
It is "global" if it can be invoked at any place.

<div class="p"><!----></div>
Types in X10 are specified through declarations and through
type constructors, described in the remainder of the chapter:

<div class="p"><!----></div>

<ul>
<li> A class declaration defines a <em>class type</em>
(&#167;).
<div class="p"><!----></div>
</li>

<li> An interface declaration defines an <em>interface type</em>
(&#167;).
<div class="p"><!----></div>
</li>

<li> Classes and interface have <em>type parameters</em>.
A class or interface with one or more type parameters is a
<em>generic class</em> or <em>generic interface</em>
(&#167;).
<div class="p"><!----></div>
</li>

<li> New type constructors may be defined with <em>type
definitions</em> (&#167;).
<div class="p"><!----></div>
</li>

<li> Methods, constructors, closures, and type definitions may
have <em>type parameters</em>, which are instantiated with
concrete types at invocation (&#167;).
<div class="p"><!----></div>
</li>

<li> <em>Function type</em> constructors are used to define
function types; functions and method selectors have function
type (&#167;).
<div class="p"><!----></div>
</li>

<li> A <em>constrained type</em> constrains the properties of
a base type (&#167;).
<div class="p"><!----></div>
</li>

<li> Types may be marked with user-defined annotations.
<em>Annotated types</em> (&#167;)
may be processed by compiler plugins.
<div class="p"><!----></div>
</li>
</ul>

<div class="p"><!----></div>

  :
  |
  
  
  
  <em>
  
<table>

<tr><td align="right">Type &nbsp;FunctionType </td></tr>
<tr><td align="right">\ -  ConstrainedType  </td></tr>
<tr><td align="right">FunctionType &nbsp;TypeParameters<sup>?</sup>&nbsp;"(" Formals<sup>?</sup>&nbsp;")"
Constraint<sup>?</sup>&nbsp;Throws<sup>?</sup>&nbsp;"=&#62;" Type </td></tr>
<tr><td align="right">TypeParameters &nbsp;"[" TypeParameter ( "," TypeParameter )<sup>*</sup>&nbsp;"]" </td></tr>
<tr><td align="right">TypeParameter &nbsp;Identifier </td></tr>
<tr><td align="right">Throws &nbsp;"throws" ( TypeName "," TypeName )<sup>*</sup>&nbsp;</td></tr>
<tr><td align="right">ConstrainedType &nbsp;Annotation<sup>*</sup>&nbsp;BaseType Constraint<sup>?</sup>&nbsp;
PlaceConstraint<sup>?</sup>&nbsp;</td></tr>
<tr><td align="right">BaseType &nbsp;ClassBaseType </td></tr>
<tr><td align="right">\ -  InterfaceBaseType </td></tr>
<tr><td align="right">\ -  PathType </td></tr>
<tr><td align="right">\ -  "(" Type ")" </td></tr>
<tr><td align="right">ClassType &nbsp;Annotation<sup>*</sup>&nbsp;ClassBaseType Constraint<sup>?</sup>&nbsp;
PlaceConstraint<sup>?</sup>&nbsp;</td></tr>
<tr><td align="right">InterfaceType &nbsp;Annotation<sup>*</sup>&nbsp;InterfaceBaseType Constraint<sup>?</sup>&nbsp;
PlaceConstraint<sup>?</sup>&nbsp;</td></tr>
<tr><td align="right">PathType &nbsp;Expression "." Identifier </td></tr>
<tr><td align="right">Annotation &nbsp;"@" InterfaceBaseType Constraint<sup>?</sup>&nbsp;</td></tr>
<tr><td align="right">ClassOrInterfaceType &nbsp;ClassType </td></tr>
<tr><td align="right">\ -  InterfaceType </td></tr>
<tr><td align="right">ClassBaseType &nbsp;TypeName </td></tr>
<tr><td align="right">InterfaceBaseType &nbsp;TypeName </td></tr>
<tr><td align="right"></td></tr></table>
</em>

<div class="p"><!----></div>

<div class="p"><!----></div>

<div class="p"><!----></div>

</body>
</html>