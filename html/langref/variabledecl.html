<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
	<title>Variable declarations</title>
</head>

<body>
 <h1><a name="tth_chAp1">
Chapter 1 </a><br />Variable declarations</h1>
<a name="exploded-syntax">
</a>
<a name="VariableDeclarations">
</a>


<div class="p"><!----></div>
Variables declarations are used to declare formal parameters,
fields, properties, and local variables.

<div class="p"><!----></div>
<em>  
<table>
<tr><td align="right">VarDeclaratorWithType &nbsp;::=&nbsp; VarDeclaratorId ResultType </td></tr>
<tr><td align="right">VarDeclarator &nbsp;::=&nbsp; VarDeclaratorId ResultType<sup>?</sup>&nbsp;</td></tr>
<tr><td align="right">VarDeclaratorId &nbsp;::=&nbsp; Annotation<sup>*</sup>&nbsp;Identifier </td></tr>
<tr><td align="right"> | Annotation<sup>*</sup>&nbsp;Identifier ( VarDeclaratorList ) </td></tr>
<tr><td align="right"> |  Annotation<sup>*</sup>&nbsp;( VarDeclaratorList ) </td></tr>
<tr><td align="right">VarDeclaratorList &nbsp;::=&nbsp;VarDeclarator ( , VarDeclarator )<sup>*</sup>&nbsp;</td></tr>
<tr><td align="right">ResultType &nbsp;::=&nbsp; : Type </td></tr>
<tr><td align="right"></td></tr></table>
</em>


<div class="p"><!----></div>

<b>Destructuring syntax.&nbsp;&nbsp;</b>
 X10 permits a <em>destructuring</em> syntax for local variable
declarations and formal parameters.
At present,  X10 v1.7 supports this feature only for
variables of
type "Point"; future versions of the language may support 
general pattern matching.
Intuitively, this syntax allows a
point to be "destructured" into its corresponding &#207;nt" 
indices in a pattern-matching style.
The kth declarator in a "Point"

is treated as a variable of type &#207;nt"
that is initialized with the value of the kth index of the point. 
The second form of the syntax permits the specification of only
the index variables.

<div class="p"><!----></div>
For example, the following code binds the &#207;nt" variable "x" to
"0" and &#255;" to "1", and the variable "p" to the
point object.
<pre>
p(i,j): Point = new Point(0,1);
</pre>

<div class="p"><!----></div>

<b>Formal parameters.&nbsp;&nbsp;</b>
Formal parameters are always declared with a type.
Formals may be declared either
final using the "val" or "var"; a declaration with
neither keyword is final.
The
variable name can be omitted if it is not to be used in the
scope of the declaration.

<div class="p"><!----></div>
<em>  
<table>
<tr><td align="right">Formal
        &nbsp;::=&nbsp; FormalModifier<sup>*</sup>&nbsp;<tt>var</tt> VarDeclaratorWithType </td></tr>
<tr><td align="right">|  FormalModifier<sup>*</sup>&nbsp;<tt>val</tt> VarDeclaratorWithType </td></tr>
<tr><td align="right">|  FormalModifier<sup>*</sup>&nbsp;VarDeclaratorWithType </td></tr>
<tr><td align="right">|  Type </td></tr>
<tr><td align="right">FormalModifier &nbsp;::=&nbsp; Annotation </td></tr>
<tr><td align="right">|  <tt>shared</tt> </td></tr>
<tr><td align="right"></td></tr></table>
</em>

<div class="p"><!----></div>

<b>Local variables.&nbsp;&nbsp;</b>
Local variable declarations may have optional
initializer expressions.  The initializer must be a subtype of
the declared type of the variable.  If the variable is final
(i.e., is declared "val")
the type may be omitted and
inferred from the initializer type ().

<div class="p"><!----></div>
<em>  
<table>
<tr><td align="right">LocalDeclaration
        &nbsp;::=&nbsp;LocalModifier<sup>*</sup>&nbsp;<tt>var</tt> LocalDeclaratorsWithType </td></tr>
<tr><td align="right"></td><td align="center"></td><td>( , LocalDeclaratorsWithType )<sup>*</sup>&nbsp;</td></tr>
<tr><td align="right">|  LocalModifier<sup>*</sup>&nbsp;<tt>val</tt> LocalDeclarators </td></tr>
<tr><td align="right"></td><td align="center"></td><td>( , LocalDeclarators )<sup>*</sup>&nbsp;</td></tr>
<tr><td align="right">|  LocalModifier<sup>*</sup>&nbsp;LocalDeclaratorsWithType </td></tr>
<tr><td align="right"></td><td align="center"></td><td>( , LocalDeclaratorsWithType )<sup>*</sup>&nbsp;</td></tr>
<tr><td align="right">LocalDeclarators
        &nbsp;::=&nbsp;LocalDeclaratorsWithType </td></tr>
<tr><td align="right">&nbsp;::=&nbsp; LocalDeclaratorWithInit </td></tr>
<tr><td align="right">LocalDeclaratorWithInit
        &nbsp;::=&nbsp; VarDeclarator Init </td></tr>
<tr><td align="right">LocalDeclaratorsWithType
        &nbsp;::=&nbsp; VarDeclaratorId
                ( , VarDeclaratorId )<sup>*</sup>&nbsp;ResultType </td></tr>
<tr><td align="right">LocalModifier &nbsp;::=&nbsp;Annotation </td></tr>
<tr><td align="right">|  <tt>shared</tt> </td></tr>
<tr><td align="right">Init &nbsp;::=&nbsp; = Expression </td></tr>
<tr><td align="right"></td></tr></table>
</em>


<div class="p"><!----></div>

<b>Fields.&nbsp;&nbsp;</b>
Fields are declared either "var" (non-final, non-static),
"val" (final, non-static), or "const" (final, static);
the default is "val".
Field declarations may have optional
initializer expressions.  The initializer must be a subtype of
the declared type of the variable.
For "var" fields,
if the initializer is omitted, the constructor must initialize
the field, or else the field is initialized with
"null" if a reference type "0" if an &#207;nt", "0L"
if a "Long",
"0.0F" if a "Float", "0.0" if a "Double", or
"false" if a "Boolean".  It is a static error if the
default value is not a member of the type (e.g., it is a static
error to elide the initializer for &#239;nt{self==1}").

<div class="p"><!----></div>
If the variable is final,
the type may be omitted and
inferred from the initializer type ().
Mutable fields must be declared with a type.
A field declaration may have an optional
, restricting how the field may be accessed.
The compiler is free to not allocate storage for the field if
the guard of a field cannot be satisfied for a given containing
object.

<div class="p"><!----></div>
<em>  
<table>
<tr><td align="right">FieldDeclaration
        &nbsp;::=&nbsp; FieldModifier<sup>*</sup>&nbsp;<tt>var</tt> FieldDeclaratorsWithType </td></tr>
<tr><td align="right"></td><td align="center"></td><td>( , FieldDeclaratorsWithType )<sup>*</sup>&nbsp;</td></tr>
<tr><td align="right">|  FieldModifier<sup>*</sup>&nbsp;<tt>const</tt> FieldDeclarators </td></tr>
<tr><td align="right"></td><td align="center"></td><td>( , FieldDeclarators )<sup>*</sup>&nbsp;</td></tr>
<tr><td align="right">|  FieldModifier<sup>*</sup>&nbsp;<tt>val</tt> FieldDeclarators </td></tr>
<tr><td align="right"></td><td align="center"></td><td>( , FieldDeclarators )<sup>*</sup>&nbsp;</td></tr>
<tr><td align="right">|  FieldModifier<sup>*</sup>&nbsp;FieldDeclaratorsWithType </td></tr>
<tr><td align="right"></td><td align="center"></td><td>( , FieldDeclaratorsWithType )<sup>*</sup>&nbsp;</td></tr>
<tr><td align="right">FieldDeclarators
        &nbsp;::=&nbsp; FieldDeclaratorsWithType </td></tr>
<tr><td align="right">&nbsp;::=&nbsp; FieldDeclaratorWithInit </td></tr>
<tr><td align="right">FieldDeclaratorId
        &nbsp;::=&nbsp; Identifier Guard<sup>?</sup>&nbsp;</td></tr>
<tr><td align="right">FieldDeclaratorWithInit
        &nbsp;::=&nbsp; FieldDeclaratorId Init </td></tr>
<tr><td align="right">|  FieldDeclaratorId ResultType Init </td></tr>
<tr><td align="right">FieldDeclaratorsWithType
        &nbsp;::=&nbsp; FieldDeclaratorId ( , FieldDeclaratorId )<sup>*</sup>&nbsp;ResultType </td></tr>
<tr><td align="right">FieldModifier &nbsp;::=&nbsp; Annotation </td></tr>
<tr><td align="right">|  <tt>static</tt> </td></tr>
<tr><td align="right"></td></tr></table>
</em>

<div class="p"><!----></div>

<b>Properties.&nbsp;&nbsp;</b>
Property declarations are always declared with a type and are
always final (either declared "val" or by default).

<div class="p"><!----></div>
<em>  
<table>
<tr><td align="right">Property
        &nbsp;::=&nbsp; PropertyModifier<sup>*</sup>&nbsp;<tt>val</tt> Identifier ResultType </td></tr>
<tr><td align="right"> | PropertyModifier<sup>*</sup>&nbsp;Identifier ResultType </td></tr>
<tr><td align="right">PropertyModifier &nbsp;::=&nbsp; Annotation </td></tr>
<tr><td align="right"></td></tr></table>
</em>

</body>
</html>