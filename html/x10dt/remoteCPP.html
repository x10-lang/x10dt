<html>
<title>X10 project with C++ backend</title>

<style type="text/css">
img {
display: block;
margin-top:10px;
margin-left:20px;
}

.menu {
font-family: Palatino Linotype, Hoefler Text,Century Schoolbook L;
font-style:italic;
}

h1 {
background-color:#e9fcdf;
padding:5px 10px;
border-style:ridge;
}

h3 {
font-variant: small-caps;
background-color:#a7afc0;
padding:5px 10px;
}

p.note {
background-color:#fdf4e0;
border-style:none none none double;
padding:5px 10px;
}
</style>

<body>
<h1>X10 Project with C++ Back-End</h1>

<p>This section describes how to create an X10 project for generating C++ files as opposed to Java. With such back-end, 
the generation of files, compilation and execution can be either be local or remote.</p>

<h3>Project Creation</h3>
<a name="creation"></a>

<p>Once you have Eclipse and X10DT installed, you should be able to create X10 projects through the traditional project
creation wizard dialog: <span class="menu">File &gt; New &gt; Project...</span>
Then you should be able to select an X10 project with C++ back-end as shown below.</p>

<img src="images/cpp-back-end/newCppProjectDialog.png" border="0" />

<p class="note">Alternatively, if you have activated the X10 Perspective <span class="menu">Window &gt Open Perspective 
&gt X10</span>, you should be able to access the next menu items sequence 
<span class="menu">File &gt; New &gt; X10 Project (C++ back-end)</span>, or by doing a right-click in the Package Explorer 
view and selecting <span class="menu">New &gt; X10 Project (C++ back-end)</span>.</p>

The next dialog page will come up:

<img src="images/cpp-back-end/new-proj-name.png" border="0" />

<p>Enter a project name and after that you should be able to click on <span class="menu">Finish</span>, 
or <span class="menu">Next</span> if you want further customizations. For instance, let's call the project <code>demo</code>.</p>

<p>At that point, an X10 project named <code>demo</code>, with C++ back-end  in <b>local mode</b>, with default 
communication interface and compilation commands, should be created. 
The project should now contain the files shown here:
</p>

<img src="images/cpp-back-end/proj-creation-result.png" border="0" />

<p class="note">You can check that the generation of C++ files occurred correctly by checking the content of the project 
output folder. One way to check that is to go to the Eclipse <b>Navigator</b> view, and click under the project folder.
In the case of the <code>demo</code> project, this should give the next list of files.
<img src="images/cpp-back-end/generated-files.png" border="0" />
Note that a <b>refresh</b> on the output folder  directory (named 'bin' here) may be necessary.
To refresh a project or folder/directory, right-click and select 'Refresh'.
</p>

<h3>Project Configuration in Local Mode</h3>
<a name="local-mode"></a>

<p>Each X10 project with C++ nature has a file named <b>x10_platform.conf</b>. If you double-click on it, a dedicated editor 
should come up in order to customize the default values determined according to your current environment. Here what 
an end-user should see by default on Windows with Cygwin installed.</p>


<p>The new project wizard provides default values for a local project.  These values are complete.
So, nothing on the following dialogs needs to be changed for a minimal local project to work.
The project has default defined values allowing a proper generation of the C++ files for the <code>Hello.x10</code> file
present in the <code>demo</code> project. 

<img src="images/cpp-back-end/local-conf.png" border="0" width="100%"/>


<p>Note that there are two different <i>tabs</i> on this page, indicated at the bottom of the view.
<ul><li>Connection and Communication Interface</li>
<li>C++ Compilation and Linking</li>
</ul>
<p>This file contains three major sections that allow the configuration and customization of the C++ files 
compilation and running generated by the X10 compiler.
</p>
<ol>
<li>There is the <b>Connection</b> section on the first page that defines where the C++ files will be generated and run. 
This is where the local versus remote configuration occurs.
<img src="images/cpp-back-end/connection-section.png" border="0" />
</li>
<li>There is the <b>Communication Interface</b> section that defines the interface for interprocess communication.
<img src="images/cpp-back-end/comm-interface-section.png" border="0" />
</li>
<li>There is the <b>Compilation and Linking</b> section that defines how to compile the C++ generated files on the target 
machine (which is either local or remote).
<img src="images/cpp-back-end/comp-link-section.png" border="0" />
</li>
<li>There is the <b>Remote Output Folder</b> section that is only enabled in case of a remote connection and that defines
where the generated files will be transfered on the remote machine.
<img src="images/cpp-back-end/output-folder-section.png" border="0" />
</li>
<li>Finally, there is the <b>X10 Distribution</b> section that is only enabled in case of a remote connection and that 
identifies where the X10 (and potentially PGAS) distribution(s) reside(s) on the remote machine.
<img src="images/cpp-back-end/distribution-section.png" border="0" />
</li>
</ol>
</p>
At this point, for the demo project created by the new project wizard, you could simply go directly to <a href="#launching">launching</a>.
However, we recommend going through the validation process as follows.
</p>


<h3>Validating Platform Configuration</h3>

Apart from the default local configuration defined after the project creation, it is <i>highly</i> recommended
to try <b>validating the platform configuration</b> after changes are made (unless you are sure the information are valid)
via the green <i>push</i> button on the top of the platform configuration form.

<table border="0">
<tr align="center">
<td><img src="images/cpp-back-end/validation-bt.png" border="0" /></td>
<td><img src="images/cpp-back-end/right_arrow.png" border="0" height="50px"/></td>
<td><img src="images/cpp-back-end/validate-progress-dialog.png" border="0" /></td>
</tr>
</table>

Such action will:
<ol>
<li>Check that a connection is accessible and valid to the target machine</li>
<li>Generate, compile and link on the target machine a simple X10 program.</li>
<li>Try running the Communication Interface Discover command.</li>
</ol>

If the different validations succeed then the <i>push</i> button should be changed into a happy smiley like below.

<img src="images/cpp-back-end/validation-success.png" border="0" />

In case of a failure, a sad smiley with a dialog box giving some explanation should come up.

<img src="images/cpp-back-end/validation-failure.png" border="0" />

<p class="note">A third smiley can also be seen when an internal error occurs during the validation process. This is
a sick smiley and, as for the failure, a dialog box should provide information about the exception, assertion or other event
that created the pathological issue.

<img src="images/cpp-back-end/validation-error.png" border="0" />
<br/>
In such case, it is recommended to report the problem to X10DT team by submitting a bug report to 
<a href="http://jira.codehaus.org/browse/XTENLANG">X10 JIRA</a>.
</p>

<h3>Saving Platform Configuration</h3>
<a name="saving"></a>

As soon as some changes to the current configuration are made, the form becomes <i>dirty</i> and the <i>Save</i> button
becomes enabled.

<img src="images/cpp-back-end/save-platform-bt.png" border="0" />

<p>Clicking on it will save the form but also will:
<ul>
<li>Check the remote connection information if needed.</li>
<li>Check the communication interface discover command.</li>
<li>Trigger the X10 builder to build the X10 project.</li>
</ul>
</p>

<p>Any error with such action will create an error marker on the platform configuration file for the relevant project.</p>

<img src="images/cpp-back-end/platform-conf-marker.png" border="0" />

<h3>Launching</h3>
<a name="launching"></a>

Once a project has been built with a <i>valid</i> platform configuration, one can create a new launch configuration for
the X10 project with the C++ back-end.
<p>To access the launch configuration dialog, select Run > Run Configurations...</p>
<p>Then create a new launch configuration for "X10 Application (C++ back-end)" </p>

<img src="images/cpp-back-end/new-launch-config.png" border="0" />

<p>The <i>Application</i> tab defines mostly the main class to execute within an X10 project with some specific arguments.

<img src="images/cpp-back-end/application-launch-tab.png" border="0" />
</p>

<p>Once a project is selected the <i>Communication Interface</i> tab, empty by default, should be dynamically loaded 
according to the Communication Interface type (selected in the project platform configuration) in order to allow some 
customizations.

<img src="images/cpp-back-end/communication-interface-launch-tab.png" border="0" />
</p>
<p>Note: If any errors are detected, a red "errors detected" link will appear at the top of the page.
Hover the mouse cursor over this red text to see where the errors have occurred.
<br>
<img src="images/cpp-back-end/remote-conf-error.png" border="0"/></br>
</p>

<p>When all the information is filled in and valid, the <i>Run</i> button in the lower right area of the launch dialog should become enabled.

<img src="images/cpp-back-end/valid-launch-config.png" border="0" />
</p>

<p>Clicking on the <i>Run</i> button will create the C++ executable for the X10 main class selected and will run it with the communication 
interface parameters defined. X10DT will switch then to the PTP <i>Parallel Runtime</i> perspective to report the 
application run.

<img src="images/cpp-back-end/app-run-result.png" border="0" />

</p>

<a href="Overview.html">Back to Overview/Contents</a>
</body>
</html>