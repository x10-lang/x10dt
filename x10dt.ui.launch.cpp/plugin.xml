<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension-point id="debuggerTab" name="debuggerTab" schema="schema/debuggerTab.exsd"/>
   <extension-point id="launchConfServices" name="Launch Configuration Services" schema="schema/launchConfServices.exsd"/>
   <extension
         id="X10CppBuilder"
         name="X10 Compiler (Cpp Back-end)"
         point="org.eclipse.core.resources.builders">
      <builder
            callOnEmptyDelta="false"
            hasNature="true"
            isConfigurable="false">
         <run
               class="x10dt.ui.launch.cpp.builder.X10CppBuilder">
         </run>
      </builder>
   </extension>
   <extension
         id="x10nature"
         name="X10 Nature"
         point="org.eclipse.core.resources.natures">
      <runtime>
         <run
               class="x10dt.ui.launch.cpp.nature.CppProjectNature">
         </run>
      </runtime>
      <builder
            id="x10dt.ui.launch.cpp.X10CppBuilder">
      </builder>
      <requires-nature
            id="org.eclipse.jdt.core.javanature">
      </requires-nature>
   </extension>
   <extension
         point="org.eclipse.ui.newWizards">
      <wizard
            canFinishEarly="false"
            category="x10dt.wizards.category"
            class="x10dt.ui.launch.cpp.wizards.CppProjectWizard"
            finalPerspective="x10dt.ui.perspective"
            hasPages="true"
            icon="icons/obj/newx10prj_cpp.gif"
            id="x10dt.ui.cpp.launch.NewX10Project"
            name="%new_prj_name"
            project="true">
      </wizard>
   </extension>
   <extension
         point="org.eclipse.ui.actionSets">
      <actionSet
            id="x10dt.ui.cpp.launch.X10ElementCreation"
            label="%perspective.actionsets">
         <action
               class="x10dt.ui.launch.cpp.actions.OpenX10ProjectCppBCWizardToolbarAction"
               icon="icons/obj/newx10prj_cpp.gif"
               id="x10dt.ui.cpp.launch.NewX10ProjectCppToolbarAction"
               label="%new.project.cpp.label"
               style="push"
               toolbarPath="Normal/X10Wizards"
               tooltip="%new.project.cpp.tooltip">
         </action>
      </actionSet>
   </extension>
   <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension
            targetID="x10dt.ui.perspective">
         <actionSet
               id="x10dt.ui.cpp.launch.X10ElementCreation">
         </actionSet>
         <newWizardShortcut
               id="x10dt.ui.cpp.launch.NewX10Project">
         </newWizardShortcut>rdShortcut>
      </perspectiveExtension>
   </extension>   
   <extension
		 point="org.eclipse.debug.core.launchConfigurationTypes">
	  <launchConfigurationType
			id="x10dt.ui.cpp.launch.X10LaunchConfigurationType"
			modes="run,debug"
			name="%launch.config.cpp.name">
	  </launchConfigurationType>
   </extension>
   <extension
	     point="org.eclipse.debug.core.launchDelegates">
	  <launchDelegate
			id="x10dt.ui.cpp.launch.X10LaunchConfigurationDelegate"
			delegate="x10dt.ui.launch.cpp.launching.CppLaunchConfigurationDelegate"
			type="x10dt.ui.cpp.launch.X10LaunchConfigurationType"
			modes="run"
			sourcePathComputerId="org.eclipse.ptp.debug.core.sourcePathComputer">
	  </launchDelegate>
   </extension>
   <extension
         point="org.eclipse.debug.ui.launchConfigurationTabGroups">
      <launchConfigurationTabGroup
            class="x10dt.ui.launch.cpp.launching.CppLaunchConfigurationTabGroup"
            id="x10dt.ui.cpp.launch.X10LaunchConfigurationTabGroup"
            type="x10dt.ui.cpp.launch.X10LaunchConfigurationType">
         <launchMode
               description="%launch.config.cpp.name"
               mode="run"
               perspective="x10dt.ui.perspective">
         </launchMode>
      </launchConfigurationTabGroup>
   </extension>
   <extension
         point="org.eclipse.debug.ui.launchConfigurationTypeImages">
      <launchConfigurationTypeImage
            configTypeID="x10dt.ui.cpp.launch.X10LaunchConfigurationType"
            icon="icons/obj/x10_application.gif"
            id="x10dt.ui.cpp.launch.X10LaunchConfigurationTypeImage">
      </launchConfigurationTypeImage>
   </extension>
   
   <!-- Remote compilation configuration -->
   
   <extension
		 point="org.eclipse.debug.core.launchConfigurationTypes">
	  <launchConfigurationType
			id="x10dt.ui.cpp.launch.X10RemoteCompilationConfigurationType"
			modes="run,debug"
			name="%remote.compilation.cpp.name">
	  </launchConfigurationType>
   </extension>
   <extension
	     point="org.eclipse.debug.core.launchDelegates">
	  <launchDelegate
			id="x10dt.ui.cpp.laun.X10RemoteCompilationConfigurationDelegate"
			delegate="x10dt.ui.launch.cpp.launching.CppLaunchConfigurationDelegate"
			type="x10dt.ui.cpp.launch.X10RemoteCompilationConfigurationType"
			modes="run"
			sourcePathComputerId="org.eclipse.ptp.debug.core.sourcePathComputer">
	  </launchDelegate>
   </extension>
   <extension
         point="org.eclipse.debug.ui.launchConfigurationTabGroups">
      <launchConfigurationTabGroup
            class="x10dt.ui.launch.cpp.launching.X10RemoteCompilationConfigurationTabGroup"
            id="x10dt.ui.cpp.launch.X10RemoteCompilationConfigurationTabGroup"
            type="x10dt.ui.cpp.launch.X10RemoteCompilationConfigurationType">
         <launchMode
               description="%remote.compilation.cpp.name"
               mode="run"
               perspective="x10dt.ui.perspective">
         </launchMode>
      </launchConfigurationTabGroup>
   </extension>
   <extension
         point="org.eclipse.debug.ui.launchConfigurationTypeImages">
      <launchConfigurationTypeImage
            configTypeID="x10dt.ui.cpp.launch.X10RemoteCompilationConfigurationType"
            icon="icons/obj/x10_application.gif"
            id="x10dt.ui.cpp.remote.compilation.X10LaunchConfigurationTypeImage">
      </launchConfigurationTypeImage>
   </extension>
   
   <!-- End  Remote compilation configuration -->
   
   
   <extension
         point="org.eclipse.ui.editors">
      <editor
            class="x10dt.ui.launch.cpp.editors.X10PlatformConfFormEditor"
            contributorClass="x10dt.ui.launch.cpp.editors.FormEditorActionBarContributor"
            default="true"
            icon="icons/obj/x10-platform-conf.png"
            id="x10dt.ui.launch.cpp.platformConfEditor"
            name="%editors.platformConfEditor">
         <contentTypeBinding
               contentTypeId="x10dt.ui.launch.cpp.x10-platform-conf.content-type">
         </contentTypeBinding>
      </editor>
   </extension>
   <extension
         point="org.eclipse.core.contenttype.contentTypes">
      <content-type
            base-type="org.eclipse.core.runtime.xml"
            file-names="x10_platform.conf"
            id="x10dt.ui.launch.cpp.x10-platform-conf.content-type"
            name="%x10-platform-conf.content-type"
            priority="normal">
      </content-type>
   </extension>
   <extension
         id="platformConfMarker"
         name="X10 Problem Marker"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.eclipse.core.resources.problemmarker">
      </super>
      <persistent
            value="true">
      </persistent>
   </extension>
   <extension
         id="platformConfValidationMarker"
         name="X10 Problem Marker"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.eclipse.core.resources.problemmarker">
      </super>
      <persistent
            value="true">
      </persistent>
   </extension>
   <extension
         point="org.eclipse.debug.ui.launchShortcuts">
      <shortcut
            class="x10dt.ui.launch.cpp.launching.X10CppLaunchShortcut"
            icon="icons/obj/x10_application.gif"
            id="x10dt.ui.launch.cpp.x10.app"
            label="%run.as.x10app"
            modes="run">
         <contextualLaunch>
            <enablement>
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <and>
                        <or>
                           <instanceof
                                 value="org.eclipse.jdt.core.IPackageFragment">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.jdt.core.IPackageFragmentRoot">
                           </instanceof>
                           <instanceof
                                 value="org.eclipse.jdt.core.IJavaProject">
                           </instanceof>
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                              <test
                                    property="x10dt.ui.hasMain" args="run,x10dt.ui.launch.cpp.x10nature">
                              </test>
                           </adapt>
                           <adapt
                                 type="org.eclipse.ui.IFileEditorInput">
                              <test
                                    args="run,x10dt.ui.launch.cpp.x10nature"
                                    property="x10dt.ui.hasMain">
                              </test>
                           </adapt>
                        </or>
                        <test
                              property="org.eclipse.debug.ui.projectNature"
                              value="x10dt.ui.launch.cpp.x10nature">
                        </test>
                     </and>
                  </iterate>
               </with>
            </enablement>
         </contextualLaunch>
         <configurationType
               id="x10dt.ui.cpp.launch.X10LaunchConfigurationType">
         </configurationType>
         <description
               description="%run.as.description"
               mode="run">
         </description>
<!--         <description
               description="%debug.as.description"
               mode="debug">
         </description> -->
      </shortcut>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="x10dt.ui.launch.cpp.x10.app.run"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+X C">
      </key>
      <key
            commandId="x10dt.ui.launch.cpp.x10.app.run"
            contextId="org.eclipse.ui.contexts.window"
            platform="carbon"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+X C">
      </key>
<!--      <key
            commandId="x10dt.ui.launch.cpp.x10.app.debug"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+M3+D C">
      </key>
      <key
            commandId="x10dt.ui.launch.cpp.x10.app.debug"
            contextId="org.eclipse.ui.contexts.window"
            platform="carbon"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+M4+D C">
      </key> -->
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.debug.ui.category.run"
            id="x10dt.ui.launch.cpp.x10.app.run"
            name="%run.app.command">
      </command>
<!--      <command
            categoryId="org.eclipse.debug.ui.category.run"
            id="x10dt.ui.launch.cpp.x10.app.debug"
            name="%debug.app.command">
      </command> -->
   </extension>
   <extension
         point="org.eclipse.ui.popupMenus">
      <objectContribution
            adaptable="false"
            id="x10dt.ui.launch.cpp.obj.contrib.convert-to-java"
            objectClass="org.eclipse.jdt.core.IJavaProject">
         <action
               class="x10dt.ui.launch.cpp.actions.ConvertToJavaBackEndAction"
               enablesFor="+"
               id="x10dt.ui.launch.cpp.convert-java-back-end"
               label="%convert.java.back-end"
               menubarPath="org.eclipse.ui.projectConfigure/additions">
         </action>
         <visibility>
            <objectState
                  name="projectNature"
                  value="x10dt.ui.launch.cpp.x10nature">
            </objectState>
         </visibility>
      </objectContribution>
   </extension>
   <extension
         point="x10dt.ui.launch.core.x10ProjectConvert">
      <converter
            backEndType="c++"
            class="x10dt.ui.launch.cpp.actions.CppBackEndProjectConverter">
      </converter>
   </extension>
   <!--
   Disable for now while PTP breakpoint persistency is being addressed.
   <extension
         point="x10dt.ui.launch.core.x10ToggleBreakpointHandler">
      <x10ToggleBreakpointHandler
            backEndType="c++"
            class="x10dt.ui.launch.cpp.debug.X10CppToggleBreakpointsHandler">
      </x10ToggleBreakpointHandler>
   </extension>
   -->

</plugin>
