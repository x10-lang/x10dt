<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
	<title>Array Initializer</title>
</head>

<body>
 <h2><a name="tth_sEc3">
3</a>&nbsp;&nbsp;Array initializer</h2><a name="ArrayInitializer">
</a><a name="array!creation">
</a>

<div class="p"><!----></div>
<pre>
450 ArrayCreationExpression ::= 
       new ArrayBaseType Unsafeopt [] 
         ArrayInitializer
451   -  new ArrayBaseType Unsafeopt 
       [ Expression ]
452   -  new ArrayBaseType Unsafeopt 
       [ Expression ] Expression
453   -  new ArrayBaseType Unsafeopt 
       [ Expression ] 
       (FormalParameter) MethodBody
454   -  new ArrayBaseType value Unsafeopt 
       [ Expression ]
455   -  new ArrayBaseType value Unsafeopt 
       [ Expression ] Expression
456   -  new ArrayBaseType value Unsafeopt 
       [ Expression ] 
       ( FormalParameter ) MethodBody
457 ArrayBaseType ::= PrimitiveType
458   -  ClassOrInterfaceType
530 Unsafeopt ::=
531   -  unsafe
</pre>

<div class="p"><!----></div>
An array may be declared <tt>unsafe</tt> if it is intended to be
allocated in an unmanaged region (e.g. for communication with native
code). A <tt>value</tt> array is an immutable array. An array creation
must take either an int as an argument or a distribution. In the first
case an array is created over the distribution <tt>[0:N-1]-&#62; here</tt>;
in the second over the given distribution. 

<div class="p"><!----></div>
An array creation operation may also specify an initializer using the
abbreviated formalparameter/methodbody functional syntax. The formal
parameter may contain exploded parameters
(Section&nbsp;). The function is applied in parallel
at all points in the domain of the distribution. The array
construction operation terminates locally only when the array has been
fully created and initialized (at all places in the range of the
distribution).

<div class="p"><!----></div>
For instance:
<pre>
int[.] data 
    = new int[1000-&#62;here] 
         new intArray.pointwiseOp(){
             public int apply(point p[i]){
               return i;
           }
     };
int[.] data2 
    = new int value [[1:1000,1:1000]-&#62;here] 
        (point p[i,j]){ return i*j; };
</pre>

<div class="p"><!----></div>
 The first declaration stores in <tt>data</tt> a reference to a mutable
array with <tt>1000</tt> elements each of which is located in the
same place as the array. Each array component is initialized to <tt>i</tt>.

<div class="p"><!----></div>
The second declaration stores in <tt>data2</tt> an (immutable)
2-d array over <tt>[1:1000, 1:1000]</tt> initialized with <tt>i*j</tt>
at point <tt>[i,j]</tt>. It uses a more abbreviated form to specify 
the array initializer function.

<div class="p"><!----></div>
Other examples:
<pre>
int[.] data 
   = new int[1000](point [i]){return i*i;};
float[D] d 
   = new float[D] (point [i]){return 10.0*i;}; 
float[D] result 
   = new float[D] 
     (point [i,j]) {return i + j; };
</pre>
</body>
</html>