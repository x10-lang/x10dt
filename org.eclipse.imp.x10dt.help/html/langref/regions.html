<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
	<title>Regions</title>
</head>

<body>
 <h2><a name="tth_sEc1">
1</a>&nbsp;&nbsp;Regions</h2><a name="XtenRegions">
</a>

<div class="p"><!----></div>
A region is a set of indices (called <em>points</em>).   X10
provides a built-in value class, <tt>x10.lang.region</tt>, to allow the
creation of new regions and to perform operations on regions. This
class is <tt>final</tt> in  X10 v1.01; future versions of the
language may permit user-definable regions. Since regions play a dual
role (values as well as types), variables of type <tt>region</tt> must be
initialized and are implicitly <tt>final</tt>. Regions are first-class
objects - they may be stored in fields of objects, passed as
arguments to methods, returned from methods etc.

<div class="p"><!----></div>
Each region <tt>R</tt> has a constant rank, <tt>R.rank</tt>, which is a
non-negative integer. The literal <tt>[]</tt> represents the <em>empty
region</em> and has rank <tt>0</tt>.

<div class="p"><!----></div>
Here are several examples of region declarations:
<pre>
region Null = [];  // Empty 0-dimensional region          
region R1 = 1:100; // 1-dim region with extent 1..100.
region R1 = [1:100]; // Same as above.
region R2 = [0:99, -1:MAX_HEIGHT];   
region R3 = region.factory.upperTriangular(N);
region R4 = region.factory.banded(N, K);
   // A square region.
region R5 = [E, E];           
   // Same region as above.
region R6 = [100, 100];       
   // Represents the intersection of two regions
region AandB = A &amp;&amp; B;       
  // represents the union of two regions
region AOrB = A || B;        
</pre>

<div class="p"><!----></div>
A region may be constructed using a comma-separated list of regions
(&#167;&nbsp;12.2) within square brackets, as above and represents
the Cartesian product of each of the arguments.  The bound of a
dimension may be any final variable of a fixed-point numeric
type.  X10 v1.01 does not support hierarchical regions.

<div class="p"><!----></div>
Various built-in regions are provided through  factory
methods on <tt>region</tt>.  For instance:


<ul>
<li> <tt>region.factory.upperTriangular(N)</tt> returns a region corresponding
to the non-zero indices in an upper-triangular <tt>N x N</tt> matrix.

<div class="p"><!----></div>
</li>

<li> <tt>region.factory.lowerTriangular(N)</tt> returns a region corresponding
to the non-zero indices in a lower-triangular <tt>N x N</tt> matrix.

<div class="p"><!----></div>
</li>

<li> <tt>region.banded(N, K)</tt> returns a region corresponding to
the non-zero indices in a banded <tt>N x N</tt> matrix where the width of
the band is <tt>K</tt>
<div class="p"><!----></div>
</li>
</ul>

<div class="p"><!----></div>
All the points in a region are ordered canonically by the lexicographic total order. Thus the points of a region <tt>R=[1:2,1:2]</tt> are ordered as 
<pre>
  (1,1), (1,2), (2,1), (2,2)
</pre>

<div class="p"><!----></div>
Sequential iteration statements such as <tt>for</tt> (&#167;&nbsp;7.7)
iterate over the points in a region in the canonical order.

<div class="p"><!----></div>
A region is said to be <em>convex</em> if it is of
the form <tt>[T1,..., Tk]</tt> for some set of enumerations <tt>Ti</tt>. Such a
region satisfies the property that if two points p<sub>1</sub> and p<sub>3</sub> are
in the region, then so is every point p<sub>2</sub> between them. (Note that
<tt>||</tt> may produce non-convex regions from convex regions, e.g.
<tt>[1,1] || [3,3]</tt> is a non-convex region.)

<div class="p"><!----></div>
For each region <tt>R</tt>, the <em>convex closure</em> of <tt>R</tt> is the
smallest convex region enclosing <tt>R</tt>.  For each integer <tt>i</tt>
less than <tt>R.rank</tt>, the term <tt>R[i]</tt> represents the enumeration
in the <tt>i</tt>th dimension of the convex closure of <tt>R</tt>. It may be
used in a type expression wherever an enumeration may be used.

<div class="p"><!----></div>
     <h3><a name="tth_sEc1.1">
1.1</a>&nbsp;&nbsp;Operations on Regions</h3>
Various non side-effecting operators (i.e. pure functions) are
provided on regions. These allow the programmer to express sparse as
well as dense regions.

<div class="p"><!----></div>
Let <tt>R</tt> be a region. A subset of <tt>R</tt> is also called a <em>
sub-region</em>.

<div class="p"><!----></div>
Let <tt>R1</tt> and <tt>R2</tt> be two regions.

<div class="p"><!----></div>
<tt>R1 &amp;&amp; R2</tt> is the intersection of <tt>R1</tt> and <tt>R2</tt>.

<div class="p"><!----></div>
<tt>R1 || R2</tt> is the union of the <tt>R1</tt> and <tt>R2</tt>.

<div class="p"><!----></div>
<tt>R1 - R2</tt> is the set difference of <tt>R1</tt> and <tt>R2</tt>.

<div class="p"><!----></div>
Two regions are equal (==) if they represent the same set of
points.
</body>
</html>