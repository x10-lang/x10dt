<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
<title>Function types</title>
</head>

<body>
 <h2><a name="tth_sEc5">
5</a>&nbsp;&nbsp;Function types</h2>
<a name="FunctionTypes">
</a>
<a name="FunctionType">
</a>



<div class="p"><!----></div>
        Function types are defined via the "=&#62;" type
        constructor.  Closures (&#167;) and method
        selectors (&#167;) are of function type.
        The general form of a function type is:
<pre>
(x<sub>1</sub>: T<sub>1</sub>, ..., x<sub>n</sub>: T<sub>n</sub>){c} =&#62; T
        throws S<sub>1</sub>, ..., S<sub>k</sub>
</pre>
        This
        is the type of functions that take 
        value parameters
        "x<sub>i</sub>"
        of types
        "T<sub>i</sub>"
        such that the guard "c" holds
        and returns a value of type "T" or throws
        exceptions of 
        types S<sub>i</sub>.

<div class="p"><!----></div>
The value parameters are in scope throughout the function
signature-they may be used in the types of other formal parameters
and in the return type.  Value parameters names  may be
omitted if they are not used.  The guard specifies a condition that 
must hold for an application to be well-typed.

<div class="p"><!----></div>
  :  |        <em>  
<table>
<tr><td align="right">FunctionType &nbsp;TypeParameters<sup>?</sup>&nbsp;"(" Formals<sup>?</sup>&nbsp;")" Constraint<sup>?</sup>&nbsp;
"=&#62;" Type Throws<sup>?</sup>&nbsp;</td></tr>
<tr><td align="right">TypeParameters &nbsp;"[" TypeParameter ( "," TypeParameter
)<sup>*</sup>&nbsp;"]" </td></tr>
<tr><td align="right">TypeParameter &nbsp;Identifier </td></tr>
<tr><td align="right">Formals &nbsp;Formal ( "," Formal )<sup>*</sup>&nbsp;</td></tr>
<tr><td align="right"></td></tr></table>
</em>

<div class="p"><!----></div>
For every sequence of types "T1,..., Tn,T", and "n" distinct variables
"x1,...,xn" and constraint "c", the expression
"(x1:T1,...,xn:Tn){c}=&#62;T" is a <em>function type</em>. It stands for
 the set of all functions "f" which can be applied in a place "p" to a
 list of values "(v1,...,vn)" provided that the constraint
 "c[v1,...,vn,p/x1,...,xn,here]" is true, and which returns a value of
 type "T[v1,...vn/x1,...,xn]". When "c" is true, the clause "{c}" can be
 omitted. When "x1,...,xn" do not occur in "c" or "T", they can be
 omitted. Thus the type "(T1,...,Tn)=&#62;T" is actually shorthand for
 "(x1:T1,...,xn:Tn){true}=&#62;T", for some variables "x1,...,xn".

<div class="p"><!----></div>
Juxtaposition is used to express function application: the expression
"f(a1,..,an)" expresses the application of a function "f" to the argument
list &#228;1,...,an".

<div class="p"><!----></div>
Note that function invocation may throw unchecked exceptions. 

<div class="p"><!----></div>
A function type is covariant in its result type and contravariant in
each of its argument types. That is, let 
"S1,...,Sn,S,T1,...Tn,T" be any
types satisfying "Si &lt;: Ti" and "S &lt;: T". Then
"(x1:T1,...,xn:Tn){c}=&#62;S" is a subtype of
"(x1:S1,...,xn:Sn){c}=&#62;T".

<div class="p"><!----></div>
A value "f" of a function type "(x1:T1,...,xn:Tn){c}=&#62;T" also
has all the methods of &#196;ny" associated with it (see &#167;).

<div class="p"><!----></div>
A function type "F=(x1:T1,...,xn:Tn){c}=&#62;T" can be used as the declared type of local variables, parameters, loop variables, return types of methods and in "_  instanceof F" and "_ as F" expressions. 

<div class="p"><!----></div>
A class or struct definition may use a function type "F" in its
implements clause; this declares an abstract method 
"def apply(x1:T1,...,xn:Tn){c}:T" on that class. Similarly, an interface
definition may specify a function type "F" in its &#235;xtends" clause. A
class or struct implementing such an interface implicitly defines an
abstract method "def apply(x1:T1,..,xn:Tn){c}:T". Expressions of such
a struct, class or interface type can be assigned to variables of type
"F" and can be applied via juxtaposition to an argument list of the
right type.

<div class="p"><!----></div>
Thus, objects and structs in X10 may behave like functions. 

<div class="p"><!----></div>
A function type "F" is not a class type in that it does not extend any
type or implement any interfaces, or support equality tests. "F" cannot be extended by any type. It
is not an interface type in that it is not a subtype of
"x10.lang.Object". (Values of type "F" cannot be assigned to variables of
type "x10.lang.Object".) It is not a struct type in that it has no
defined fields and hence no notion of structural equality.

<div class="p"><!----></div>
"null" is a legal value for a function type. 

<div class="p"><!----></div>

</body>
</html>