<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
	<title>Types</title>
</head>

<body>
 <h1><a name="tth_chAp1">
Chapter 4 </a><br />Types</h1>
<a name="XtenTypes">
</a>

<div class="p"><!----></div>
X10 is a <em>strongly typed</em> object-oriented language: every
variable and expression has a type that is known at compile-time.
Types limit the values that variables can hold and specify the places
at which these values can lie.

<div class="p"><!----></div>
X10 supports three kinds of runtime entities, <em>objects</em>,
<em>structs</em>, and <em>functions</em>. Objects are instances of <em>
  classes</em> (&#167;). They may contain mutable fields
and stay resident in the place in which they were
created. 
Objects are said to be <em>boxed</em> in that variables of a
class type are implemented through a single memory location that
contains a reference to the memory containing the declared state of
the object (and other meta-information such as the list of methods of
the object). Thus objects are represented through an extra level of
indirection. A consequence of this flexibility is that every class
type contains the value <b>null</b> corresponding to the invalid
reference. <b>null</b> is often useful as a default value. Further, two
objects may be compared for identity (<b>==</b>) in constant time by
simply containing references to the memory used to represent the
objects.

<div class="p"><!----></div>
Structs are instances of <em>struct types</em> (&#167;). They are a
restricted variant of classes, lacking meta-information; this makes them less
flexible, but in many cases more efficient. When it is semantically
meaningful, converting a class into a struct or vice-versa is quite easy.
Structs are immutable and may be freely copied from place to place. Further,
they may be allocated inline, using only as much memory as necessary to hold
and align the fields of the struct.

<div class="p"><!----></div>
Functions, called closures or lambda-expressions in other languages, are
instances of <em>function types</td><td width="150">
&#124;</em> (&#167;). Functions can refer to
variables from the surrounding environment; , <b>(x:Int)=&#62;x*y</b> is a unary
integer function which multiplies its argument by the variable <b>y</b> from
the surrounding block.  
Functions may be freely copied from place to place and may be repeatedly
applied to a set of arguments.

<div class="p"><!----></div>
These runtime entities are classified by <em>types</em>. Types are used in
variable declarations, explicit coercions and conversions, object creation,
array creation, class literals, static state and method accessors, and
<b>instanceof</b> expressions.

<div class="p"><!----></div>
The basic relationship between values and types is <em>instantiation</em>. For
example, <b>1</b> is an instance of type of integers, <b>Int</b>. It is also an
instance of type of all entities <b>Any</b>, and of type of nonzero integers
<b>Int{self != 0}</b>, and many others.

<div class="p"><!----></div>
The basic relationship between types is <em>subtyping</em>: <b>T &lt;: U</b> holds if
every instance of <b>T</b> is also an instance of <b>U</b>. Two important kinds
of subtyping are <em>subclassing</em> and <em>strengthening</em>.  Subclassing is a
familiar notion from object-oriented programming.  In a class
hierarchy with classes <b>Animal</b> and <b>Cat</b> arranged in the usual way,
every <b>Cat</b> is an <b>Animal</b>, so <b>Cat &lt;: Animal</b> by subclassing.  
Strengthening is an equally familiar notion from logic.   The instances of
<b>Int{self != 0}</b> are all elements of <b>Int{true}</b> as well, because
<b>self != 0</b> logically implies <b>true</b>; so 
<b>Int{self != 0} &lt;: Int{true} == Int</b> by strengthening.  X10 uses both
notions of subtyping.  See &#167; for the full definition
of subtyping in X10.

<div class="p"><!----></div>

<h3>The Grammar of Types</h3>

<div class="p"><!----></div>
Types are described by the following grammar: <br />


  :
  |
  
  
  
  <em>
  
<table>

<tr><td align="right">Type ::= FunctionType </td></tr>
<tr><td align="right">&#124; ConstrainedType  </td></tr>
<tr><td align="right">FunctionType ::= TypeParameters<sup>?</sup>&nbsp;<b>(</b> Formals<sup>?</sup>&nbsp;<b>)</b>
Constraint<sup>?</sup>&nbsp;Throws<sup>?</sup>&nbsp;<b>=&#62;</b> TypeOrVoid </td></tr>
<tr><td align="right">TypeParameters ::= <b>[</b> TypeParameter ( <b>,</b> TypeParameter )<sup>*</sup>&nbsp;<b>]</b> </td></tr>
<tr><td align="right">TypeParameter ::= Identifier </td></tr>
<tr><td align="right">Throws ::= <b>throws</b> TypeName ( <b>,</b> TypeName )<sup>*</sup>&nbsp;</td></tr>
<tr><td align="right">ConstrainedType ::= Annotation<sup>*</sup>&nbsp;BaseType Constraint<sup>?</sup>&nbsp;
PlaceConstraint<sup>?</sup>&nbsp;</td></tr>
<tr><td align="right">BaseType ::= ClassBaseType </td></tr>
<tr><td align="right">&#124; InterfaceBaseType </td></tr>
<tr><td align="right">&#124; PathType </td></tr>
<tr><td align="right">&#124; <b>(</b> Type <b>)</b> </td></tr>
<tr><td align="right">TypeOrVoid ::= Type </td></tr>
<tr><td align="right">&#124; <b>Void</b></td></tr>
<tr><td align="right">ClassType ::= Annotation<sup>*</sup>&nbsp;ClassBaseType Constraint<sup>?</sup>&nbsp;
PlaceConstraint<sup>?</sup>&nbsp;</td></tr>
<tr><td align="right">InterfaceType ::= Annotation<sup>*</sup>&nbsp;InterfaceBaseType Constraint<sup>?</sup>&nbsp;
PlaceConstraint<sup>?</sup>&nbsp;</td></tr>
<tr><td align="right">PathType ::= Expression <b>.</b> Identifier </td></tr>
<tr><td align="right">Annotation ::= <b>@</b> InterfaceBaseType Constraint<sup>?</sup>&nbsp;</td></tr>
<tr><td align="right">ClassOrInterfaceType ::= ClassType </td></tr>
<tr><td align="right">&#124; InterfaceType </td></tr>
<tr><td align="right">ClassBaseType ::= TypeName </td></tr>
<tr><td align="right">InterfaceBaseType ::= TypeName </td></tr>
<tr><td align="right"></td></tr></table>
</em>

<div class="p"><!----></div>

<div class="p"><!----></div>

<div class="p"><!----></div>

</body>
</html>