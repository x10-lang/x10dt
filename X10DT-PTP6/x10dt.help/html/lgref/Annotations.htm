<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
           "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<meta name="GENERATOR" content="TtH 3.89">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
 
      
<title>Annotations</title>
<a href="#tth_chAp1">Annotations</a> <br/>
<ul>
<li><a href="#tth_sEc1">Annotation syntax</a> <br/>
<li><a href="#tth_sEc2">Annotation declarations</a> <br/>
</ul>

<div class="p"><!----></div>
 


<div class="p"><!----></div>
 

<div class="p"><!----></div>
 

<div class="p"><!----></div>
 


<div class="p"><!----></div>

<div class="p"><!----></div>

<div class="p"><!----></div>
  




<div class="p"><!----></div>

<div class="p"><!----></div>
  
<div class="p"><!----></div>

<div class="p"><!----></div>
 <h1><a name="tth_chAp1">
Chapter 17 </a><br />Annotations</h1><a name="XtenAnnotations">
</a>

<div class="p"><!----></div>
X10 provides an 
an annotation system  system for to allow the
compiler to be extended with new static analyses and new
transformations.

<div class="p"><!----></div>
Annotations are constraint-free interface types that decorate the abstract syntax tree
of an X10 program.  The X10 type-checker ensures that an annotation
is a legal interface type.
In X10, interfaces may declare
both methods and properties.  Therefore, like any interface type, an
annotation may instantiate
one or more of its interface's properties.

<div class="p"><!----></div>
 <h2><a name="tth_sEc1">
1</a>&nbsp;&nbsp;Annotation syntax</h2>

<div class="p"><!----></div>
The annotation syntax consists of an "<tt>@</tt>" followed by an interface type.

<div class="p"><!----></div>

 
 
  
  
  
  <em>
  
<table>

<tr><td align="right">Annotations ::= Annotation </td></tr>
<tr><td align="right">&#124; Annotations Annotation </td></tr>
<tr><td align="right">Annotation ::= <b>@</b> NamedTypeNoConstraints </td></tr>
<tr><td align="right"></td></tr></table>
</em>

<div class="p"><!----></div>
Annotations can be applied to most syntactic constructs in the language
including class declarations, constructors, methods, field declarations,
local variable declarations and formal parameters, statements,
expressions, and types.
Multiple occurrences of the same annotation (i.e., multiple
annotations with the same interface type) on the same entity are permitted.

<div class="p"><!----></div>

<div class="p"><!----></div>
Recall that interface types may have dependent parameters.

<div class="p"><!----></div>
The following examples illustrate the syntax:

<div class="p"><!----></div>

<ul>
<li> Declaration annotations:
<pre>
  // class annotation
  @Value
  class Cons { ... }

<div class="p"><!----></div>
  // method annotation
  @PreCondition(0 &lt;= i &amp;&amp; i &lt; this.size)
  public def get(i: Int): Object { ... }

<div class="p"><!----></div>
  // constructor annotation
  @Where(x != null)
  def this(x: T) { ... }

<div class="p"><!----></div>
  // constructor return type annotation
  def this(x: T): C@Initialized { ... }

<div class="p"><!----></div>
  // variable annotation
  @Unique x: A;
</pre>
<div class="p"><!----></div>
</li>

<li> Type annotations:
<pre>
  List@Nonempty

<div class="p"><!----></div>
  Int@Range(1,4)

<div class="p"><!----></div>
  Array[Array[Double]]@Size(n * n)
</pre>
<div class="p"><!----></div>
</li>

<li> Expression annotations:
<pre>
  m()  @RemoteCall
</pre>
<div class="p"><!----></div>
</li>

<li> Statement annotations:
<pre>
  @Atomic { ... }

<div class="p"><!----></div>
  @MinIterations(0)
  @MaxIterations(n)
  for (var i: Int = 0; i &lt; n; i++) { ... }

<div class="p"><!----></div>
  // An annotated empty statement ;
  @Assert(x &lt; y);
</pre>
<div class="p"><!----></div>
</li>
</ul>

<div class="p"><!----></div>
 <h2><a name="tth_sEc2">
2</a>&nbsp;&nbsp;Annotation declarations</h2>

<div class="p"><!----></div>
Annotations are declared as interfaces.  They must be
subtypes of the interface <tt>x10.lang.annotation.Annotation</tt>.
Annotations on particular static entities must extend the corresponding
<b>Annotation</b> subclasses, as follows: 

<ul>
<li> Expressions-<b>ExpressionAnnotation</b>
<div class="p"><!----></div>
</li>

<li> Statements-<b>StatementAnnotation</b>
<div class="p"><!----></div>
</li>

<li> Classes-<b>ClassAnnotation</b>
<div class="p"><!----></div>
</li>

<li> Fields-<b>FieldAnnotation</b>
<div class="p"><!----></div>
</li>

<li> Methods-<b>MethodAnnotation</b>
<div class="p"><!----></div>
</li>

<li> Imports-<b>ImportAnnotation</b>
<div class="p"><!----></div>
</li>

<li> Packages-<b>PackageAnnotation</b>
<div class="p"><!----></div>
</li>
</ul>

<br /><br />
</html>
